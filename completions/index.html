<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Completions</title>
    








<link href='/cobra/styles/screen.min.04c300c0ff01f50c72967053271aaa3898f2b28787896b14c951cf82765d164d.css' rel="stylesheet" media="screen" integrity="sha256-BMMAwP8B9QxylnBTJxqqOJjysoeHiWsUyVHPgnZdFk0=" />
<link href='/cobra/styles/print.min.a7c2a8286d68037955f815e893f27bb302403d99007cde4cd55f264431a85aa9.css' rel="stylesheet" media="print" integrity="sha256-p8KoKG1oA3lV&#43;BXok/J7swJAPZkAfN5M1V8mRDGoWqk=" />


    











<script src='/cobra/js/all.min.9e6ecf552fccad7592c81dd5fb2f1e5bf87346e2491e3807f4d8fd6770b8a1f9.js' integrity="sha256-nm7PVS/MrXWSyB3V&#43;y8eW/hzRuJJHjgH9Nj9Z3C4ofk="></script>

    
</head>
<body class="index" data-languages="">
    <a href="#" id="nav-button">
        <span>
        NAV
        <img src='/cobra/images/navbar.png'/>
      </span>
    </a>
    <div class="toc-wrapper">
        
         <img src='/cobra/images/logo.png' class="logo" />
         
        
        <div class="search">
            <input type="search" class="search" id="input-search" placeholder='Search'>
        </div>
        <ul class="search-results"></ul>
        
        
    <ul id="toc" class="toc-list-h1">
        
        
            
        
        
            <li>
                <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
                
            </li>
        
            <li>
                <a href="#concepts" class="toc-h1 toc-link" data-title="Concepts">Concepts</a>
                
                    <ul class="toc-list-h2">
                        
                            <li><a href="#commands" class="toc-h2 toc-link" data-title="Commands">Commands</a></li>
                        
                            <li><a href="#flags" class="toc-h2 toc-link" data-title="Flags">Flags</a></li>
                        
                    </ul>
                
            </li>
        
            <li>
                <a href="#installing" class="toc-h1 toc-link" data-title="Installing">Installing</a>
                
            </li>
        
            <li>
                <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
                
                    <ul class="toc-list-h2">
                        
                            <li><a href="#using-the-cobra-generator" class="toc-h2 toc-link" data-title="Using the Cobra Generator">Using the Cobra Generator</a></li>
                        
                            <li><a href="#using-the-cobra-library" class="toc-h2 toc-link" data-title="Using the Cobra Library">Using the Cobra Library</a></li>
                        
                            <li><a href="#working-with-flags" class="toc-h2 toc-link" data-title="Working with Flags">Working with Flags</a></li>
                        
                            <li><a href="#positional-and-custom-arguments" class="toc-h2 toc-link" data-title="Positional and Custom Arguments">Positional and Custom Arguments</a></li>
                        
                            <li><a href="#example" class="toc-h2 toc-link" data-title="Example">Example</a></li>
                        
                            <li><a href="#help-command" class="toc-h2 toc-link" data-title="Help Command">Help Command</a></li>
                        
                            <li><a href="#usage-message" class="toc-h2 toc-link" data-title="Usage Message">Usage Message</a></li>
                        
                            <li><a href="#version-flag" class="toc-h2 toc-link" data-title="Version Flag">Version Flag</a></li>
                        
                            <li><a href="#prerun-and-postrun-hooks" class="toc-h2 toc-link" data-title="PreRun and PostRun Hooks">PreRun and PostRun Hooks</a></li>
                        
                            <li><a href="#suggestions-when-unknown-command-happens" class="toc-h2 toc-link" data-title="Suggestions when &amp;ldquo;unknown command&amp;rdquo; happens">Suggestions when &amp;ldquo;unknown command&amp;rdquo; happens</a></li>
                        
                            <li><a href="#generating-documentation-for-your-command" class="toc-h2 toc-link" data-title="Generating documentation for your command">Generating documentation for your command</a></li>
                        
                            <li><a href="#generating-shell-completions" class="toc-h2 toc-link" data-title="Generating shell completions">Generating shell completions</a></li>
                        
                    </ul>
                
            </li>
        
            <li>
                <a href="#shell-completions" class="toc-h1 toc-link" data-title="Shell completions">Shell completions</a>
                
                    <ul class="toc-list-h2">
                        
                            <li><a href="#customizing-completions" class="toc-h2 toc-link" data-title="Customizing completions">Customizing completions</a></li>
                        
                            <li><a href="#bash-completions" class="toc-h2 toc-link" data-title="Bash completions">Bash completions</a></li>
                        
                            <li><a href="#fish-completions" class="toc-h2 toc-link" data-title="Fish completions">Fish completions</a></li>
                        
                            <li><a href="#powershell-completions" class="toc-h2 toc-link" data-title="PowerShell completions">PowerShell completions</a></li>
                        
                            <li><a href="#zsh-completions" class="toc-h2 toc-link" data-title="Zsh completions">Zsh completions</a></li>
                        
                    </ul>
                
            </li>
        
            <li>
                <a href="#documentation-generation" class="toc-h1 toc-link" data-title="Documentation generation">Documentation generation</a>
                
                    <ul class="toc-list-h2">
                        
                            <li><a href="#options" class="toc-h2 toc-link" data-title="Options">Options</a></li>
                        
                            <li><a href="#man-pages" class="toc-h2 toc-link" data-title="Man Pages">Man Pages</a></li>
                        
                            <li><a href="#markdown-docs" class="toc-h2 toc-link" data-title="Markdown Docs">Markdown Docs</a></li>
                        
                            <li><a href="#restructured-text-docs" class="toc-h2 toc-link" data-title="ReStructured Text Docs">ReStructured Text Docs</a></li>
                        
                            <li><a href="#yaml-docs" class="toc-h2 toc-link" data-title="Yaml Docs">Yaml Docs</a></li>
                        
                    </ul>
                
            </li>
        
            <li>
                <a href="#contributing-to-cobra" class="toc-h1 toc-link" data-title="Contributing to Cobra">Contributing to Cobra</a>
                
                    <ul class="toc-list-h2">
                        
                            <li><a href="#code-of-conduct" class="toc-h2 toc-link" data-title="Code of Conduct">Code of Conduct</a></li>
                        
                            <li><a href="#questions" class="toc-h2 toc-link" data-title="Questions">Questions</a></li>
                        
                            <li><a href="#filing-a-bug-or-feature" class="toc-h2 toc-link" data-title="Filing a bug or feature">Filing a bug or feature</a></li>
                        
                            <li><a href="#submitting-changes" class="toc-h2 toc-link" data-title="Submitting changes">Submitting changes</a></li>
                        
                    </ul>
                
            </li>
        
            <li>
                <a href="#cobra-changelog" class="toc-h1 toc-link" data-title="Cobra Changelog">Cobra Changelog</a>
                
                    <ul class="toc-list-h2">
                        
                            <li><a href="#pending" class="toc-h2 toc-link" data-title="Pending">Pending</a></li>
                        
                            <li><a href="#v100" class="toc-h2 toc-link" data-title="v1.0.0">v1.0.0</a></li>
                        
                    </ul>
                
            </li>
        
            <li>
                <a href="#projects-using-cobra" class="toc-h1 toc-link" data-title="Projects using Cobra">Projects using Cobra</a>
                
            </li>
        
            <li>
                <a href="#license" class="toc-h1 toc-link" data-title="License">License</a>
                
            </li>
        
    </ul>

         
        
        <ul class="toc-footer">
            
            <li><a href="https://github.com/spf13/cobra"><img src="https://img.shields.io/badge/-spf13/cobra-323131.svg?logo=github&amp;style=flat-square&amp;longCache=true" alt="github.com/spf13/cobra"></a></li>
            
            <li>Built with <a href="https://gohugo.io/">Hugo</a> theme <a href="https://github.com/bep/docuapi">DocuAPI</a> by <a href="https://github.com/bep">bep</a></li>
            
        </ul>
        
        
    </div>
    <div class="page-wrapper">
        <div class="dark-box"></div>
        <div class="content">
            
    
        <h1 id="overview">Overview</h1>
<p>Cobra is a library providing a simple interface to create powerful modern CLI
interfaces similar to git &amp; go tools.</p>
<p>Cobra is also an application that will generate your application scaffolding to rapidly
develop a Cobra-based application.</p>
<p>Cobra provides:</p>
<ul>
<li>Easy subcommand-based CLIs: <code>app server</code>, <code>app fetch</code>, etc.</li>
<li>Fully POSIX-compliant flags (including short &amp; long versions)</li>
<li>Nested subcommands</li>
<li>Global, local and cascading flags</li>
<li>Easy generation of applications &amp; commands with <code>cobra init appname</code> &amp; <code>cobra add cmdname</code></li>
<li>Intelligent suggestions (<code>app srver</code>&hellip; did you mean <code>app server</code>?)</li>
<li>Automatic help generation for commands and flags</li>
<li>Automatic help flag recognition of <code>-h</code>, <code>--help</code>, etc.</li>
<li>Automatically generated shell autocomplete for your application (bash, zsh, fish, powershell)</li>
<li>Automatically generated man pages for your application</li>
<li>Command aliases so you can change things without breaking them</li>
<li>The flexibility to define your own help, usage, etc.</li>
<li>Optional tight integration with <a href="http://github.com/spf13/viper">viper</a> for 12-factor apps</li>
</ul>

    
        <h1 id="concepts">Concepts</h1>
<p>Cobra is built on a structure of commands, arguments &amp; flags.</p>
<p><strong>Commands</strong> represent actions, <strong>Args</strong> are things and <strong>Flags</strong> are modifiers for those actions.</p>
<p>The best applications read like sentences when used, and as a result, users
intuitively know how to interact with them.</p>
<p>The pattern to follow is
<code>APPNAME VERB NOUN --ADJECTIVE.</code>
or
<code>APPNAME COMMAND ARG --FLAG</code></p>
<p>A few good real world examples may better illustrate this point.</p>
<p>In the following example, &lsquo;server&rsquo; is a command, and &lsquo;port&rsquo; is a flag:</p>
<pre><code>hugo server --port=1313
</code></pre>
<p>In this command we are telling Git to clone the url bare.</p>
<pre><code>git clone URL --bare
</code></pre>
<h2 id="commands">Commands</h2>
<p>Command is the central point of the application. Each interaction that
the application supports will be contained in a Command. A command can
have children commands and optionally run an action.</p>
<p>In the example above, &lsquo;server&rsquo; is the command.</p>
<p><a href="https://godoc.org/github.com/spf13/cobra#Command">More about cobra.Command</a></p>
<h2 id="flags">Flags</h2>
<p>A flag is a way to modify the behavior of a command. Cobra supports
fully POSIX-compliant flags as well as the Go <a href="https://golang.org/pkg/flag/">flag package</a>.
A Cobra command can define flags that persist through to children commands
and flags that are only available to that command.</p>
<p>In the example above, &lsquo;port&rsquo; is the flag.</p>
<p>Flag functionality is provided by the <a href="https://github.com/spf13/pflag">pflag
library</a>, a fork of the flag standard library
which maintains the same interface while adding POSIX compliance.</p>

    
        <h1 id="installing">Installing</h1>
<p>Using Cobra is easy. First, use <code>go get</code> to install the latest version
of the library. This command will install the <code>cobra</code> generator executable
along with the library and its dependencies:</p>
<pre><code>go get -u github.com/spf13/cobra
</code></pre>
<p>Next, include Cobra in your application:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
</code></pre></div>
    
        <h1 id="getting-started">Getting Started</h1>
<p>While you are welcome to provide your own organization, typically a Cobra-based
application will follow the following organizational structure:</p>
<pre><code>  ▾ appName/
    ▾ cmd/
        add.go
        your.go
        commands.go
        here.go
      main.go
</code></pre><p>In a Cobra app, typically the main.go file is very bare. It serves one purpose: to initialize Cobra.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
  <span style="color:#e6db74">&#34;{pathToYourApp}/cmd&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
  <span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">Execute</span>()
}
</code></pre></div><h2 id="using-the-cobra-generator">Using the Cobra Generator</h2>
<p>Cobra provides its own program that will create your application and add any
commands you want. It's the easiest way to incorporate Cobra into your application.</p>
<p><a href="https://github.com/spf13/cobra/blob/master/cobra/README.md">Here</a> you can find more information about it.</p>
<h2 id="using-the-cobra-library">Using the Cobra Library</h2>
<p>To manually implement Cobra you need to create a bare main.go file and a rootCmd file.
You will optionally provide additional commands as you see fit.</p>
<h3 id="create-rootcmd">Create rootCmd</h3>
<p>Cobra doesn't require any special constructors. Simply create your commands.</p>
<p>Ideally you place this in app/cmd/root.go:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">rootCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
  <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;hugo&#34;</span>,
  <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;Hugo is a very fast static site generator&#34;</span>,
  <span style="color:#a6e22e">Long</span>: <span style="color:#e6db74">`</span><span style="color:#e6db74">A Fast and Flexible Static Site Generator built with
</span><span style="color:#e6db74">                love by spf13 and friends in Go.
</span><span style="color:#e6db74">                Complete documentation is available at http://hugo.spf13.com</span><span style="color:#e6db74">`</span>,
  <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
    <span style="color:#75715e">// Do Stuff Here
</span><span style="color:#75715e"></span>  },
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Execute</span>() {
  <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">Execute</span>(); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintln</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stderr</span>, <span style="color:#a6e22e">err</span>)
    <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Exit</span>(<span style="color:#ae81ff">1</span>)
  }
}
</code></pre></div><p>You will additionally define flags and handle configuration in your init() function.</p>
<p>For example cmd/root.go:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">cmd</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;os&#34;</span>

	<span style="color:#a6e22e">homedir</span> <span style="color:#e6db74">&#34;github.com/mitchellh/go-homedir&#34;</span>
	<span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
	<span style="color:#e6db74">&#34;github.com/spf13/viper&#34;</span>
)

<span style="color:#66d9ef">var</span> (
	<span style="color:#75715e">// Used for flags.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">cfgFile</span>     <span style="color:#66d9ef">string</span>
	<span style="color:#a6e22e">userLicense</span> <span style="color:#66d9ef">string</span>

	<span style="color:#a6e22e">rootCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
		<span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;cobra&#34;</span>,
		<span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;A generator for Cobra based Applications&#34;</span>,
		<span style="color:#a6e22e">Long</span>: <span style="color:#e6db74">`</span><span style="color:#e6db74">Cobra is a CLI library for Go that empowers applications.
</span><span style="color:#e6db74">This application is a tool to generate the needed files
</span><span style="color:#e6db74">to quickly create a Cobra application.</span><span style="color:#e6db74">`</span>,
	}
)

<span style="color:#75715e">// Execute executes the root command.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Execute</span>() <span style="color:#66d9ef">error</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">Execute</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
	<span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">OnInitialize</span>(<span style="color:#a6e22e">initConfig</span>)

	<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">StringVar</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cfgFile</span>, <span style="color:#e6db74">&#34;config&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;config file (default is $HOME/.cobra.yaml)&#34;</span>)
	<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">StringP</span>(<span style="color:#e6db74">&#34;author&#34;</span>, <span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;YOUR NAME&#34;</span>, <span style="color:#e6db74">&#34;author name for copyright attribution&#34;</span>)
	<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">userLicense</span>, <span style="color:#e6db74">&#34;license&#34;</span>, <span style="color:#e6db74">&#34;l&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;name of license for the project&#34;</span>)
	<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">Bool</span>(<span style="color:#e6db74">&#34;viper&#34;</span>, <span style="color:#66d9ef">true</span>, <span style="color:#e6db74">&#34;use Viper for configuration&#34;</span>)
	<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">BindPFlag</span>(<span style="color:#e6db74">&#34;author&#34;</span>, <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">Lookup</span>(<span style="color:#e6db74">&#34;author&#34;</span>))
	<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">BindPFlag</span>(<span style="color:#e6db74">&#34;useViper&#34;</span>, <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">Lookup</span>(<span style="color:#e6db74">&#34;viper&#34;</span>))
	<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">SetDefault</span>(<span style="color:#e6db74">&#34;author&#34;</span>, <span style="color:#e6db74">&#34;NAME HERE &lt;EMAIL ADDRESS&gt;&#34;</span>)
	<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">SetDefault</span>(<span style="color:#e6db74">&#34;license&#34;</span>, <span style="color:#e6db74">&#34;apache&#34;</span>)

	<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">AddCommand</span>(<span style="color:#a6e22e">addCmd</span>)
	<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">AddCommand</span>(<span style="color:#a6e22e">initCmd</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">er</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">interface</span>{}) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Error:&#34;</span>, <span style="color:#a6e22e">msg</span>)
	<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Exit</span>(<span style="color:#ae81ff">1</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">initConfig</span>() {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">cfgFile</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span> {
		<span style="color:#75715e">// Use config file from the flag.
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">SetConfigFile</span>(<span style="color:#a6e22e">cfgFile</span>)
	} <span style="color:#66d9ef">else</span> {
		<span style="color:#75715e">// Find home directory.
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">home</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">homedir</span>.<span style="color:#a6e22e">Dir</span>()
		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
			<span style="color:#a6e22e">er</span>(<span style="color:#a6e22e">err</span>)
		}

		<span style="color:#75715e">// Search config in home directory with name &#34;.cobra&#34; (without extension).
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">AddConfigPath</span>(<span style="color:#a6e22e">home</span>)
		<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">SetConfigName</span>(<span style="color:#e6db74">&#34;.cobra&#34;</span>)
	}

	<span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">AutomaticEnv</span>()

	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">ReadInConfig</span>(); <span style="color:#a6e22e">err</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Using config file:&#34;</span>, <span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">ConfigFileUsed</span>())
	}
}
</code></pre></div><h3 id="create-your-maingo">Create your main.go</h3>
<p>With the root command you need to have your main function execute it.
Execute should be run on the root for clarity, though it can be called on any command.</p>
<p>In a Cobra app, typically the main.go file is very bare. It serves, one purpose, to initialize Cobra.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
  <span style="color:#e6db74">&#34;{pathToYourApp}/cmd&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
  <span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">Execute</span>()
}
</code></pre></div><h3 id="create-additional-commands">Create additional commands</h3>
<p>Additional commands can be defined and typically are each given their own file
inside of the cmd/ directory.</p>
<p>If you wanted to create a version command you would create cmd/version.go and
populate it with the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">cmd</span>

<span style="color:#f92672">import</span> (
  <span style="color:#e6db74">&#34;fmt&#34;</span>

  <span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">AddCommand</span>(<span style="color:#a6e22e">versionCmd</span>)
}

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">versionCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
  <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;version&#34;</span>,
  <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;Print the version number of Hugo&#34;</span>,
  <span style="color:#a6e22e">Long</span>:  <span style="color:#e6db74">`</span><span style="color:#e6db74">All software has versions. This is Hugo&#39;s</span><span style="color:#e6db74">`</span>,
  <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hugo Static Site Generator v0.9 -- HEAD&#34;</span>)
  },
}
</code></pre></div><h3 id="returning-and-handling-errors">Returning and handling errors</h3>
<p>If you wish to return an error to the caller of a command, <code>RunE</code> can be used.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">cmd</span>

<span style="color:#f92672">import</span> (
  <span style="color:#e6db74">&#34;fmt&#34;</span>

  <span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">AddCommand</span>(<span style="color:#a6e22e">tryCmd</span>)
}

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">tryCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
  <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;try&#34;</span>,
  <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;Try and possibly fail at something&#34;</span>,
  <span style="color:#a6e22e">RunE</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">someFunc</span>(); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
    }
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
  },
}
</code></pre></div><p>The error can then be caught at the execute function call.</p>
<h2 id="working-with-flags">Working with Flags</h2>
<p>Flags provide modifiers to control how the action command operates.</p>
<h3 id="assign-flags-to-a-command">Assign flags to a command</h3>
<p>Since the flags are defined and used in different locations, we need to
define a variable outside with the correct scope to assign the flag to
work with.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Verbose</span> <span style="color:#66d9ef">bool</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Source</span> <span style="color:#66d9ef">string</span>
</code></pre></div><p>There are two different approaches to assign a flag.</p>
<h3 id="persistent-flags">Persistent Flags</h3>
<p>A flag can be &lsquo;persistent&rsquo;, meaning that this flag will be available to the
command it's assigned to as well as every command under that command. For
global flags, assign a flag as a persistent flag on the root.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">BoolVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Verbose</span>, <span style="color:#e6db74">&#34;verbose&#34;</span>, <span style="color:#e6db74">&#34;v&#34;</span>, <span style="color:#66d9ef">false</span>, <span style="color:#e6db74">&#34;verbose output&#34;</span>)
</code></pre></div><h3 id="local-flags">Local Flags</h3>
<p>A flag can also be assigned locally, which will only apply to that specific command.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">localCmd</span>.<span style="color:#a6e22e">Flags</span>().<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Source</span>, <span style="color:#e6db74">&#34;source&#34;</span>, <span style="color:#e6db74">&#34;s&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;Source directory to read from&#34;</span>)
</code></pre></div><h3 id="local-flag-on-parent-commands">Local Flag on Parent Commands</h3>
<p>By default, Cobra only parses local flags on the target command, and any local flags on
parent commands are ignored. By enabling <code>Command.TraverseChildren</code>, Cobra will
parse local flags on each command before executing the target command.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">command</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
  <span style="color:#a6e22e">Use</span>: <span style="color:#e6db74">&#34;print [OPTIONS] [COMMANDS]&#34;</span>,
  <span style="color:#a6e22e">TraverseChildren</span>: <span style="color:#66d9ef">true</span>,
}
</code></pre></div><h3 id="bind-flags-with-config">Bind Flags with Config</h3>
<p>You can also bind your flags with <a href="https://github.com/spf13/viper">viper</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">author</span> <span style="color:#66d9ef">string</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">StringVar</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">author</span>, <span style="color:#e6db74">&#34;author&#34;</span>, <span style="color:#e6db74">&#34;YOUR NAME&#34;</span>, <span style="color:#e6db74">&#34;Author name for copyright attribution&#34;</span>)
  <span style="color:#a6e22e">viper</span>.<span style="color:#a6e22e">BindPFlag</span>(<span style="color:#e6db74">&#34;author&#34;</span>, <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">Lookup</span>(<span style="color:#e6db74">&#34;author&#34;</span>))
}
</code></pre></div><p>In this example, the persistent flag <code>author</code> is bound with <code>viper</code>.
<strong>Note</strong>: the variable <code>author</code> will not be set to the value from config,
when the <code>--author</code> flag is not provided by user.</p>
<p>More in <a href="https://github.com/spf13/viper#working-with-flags">viper documentation</a>.</p>
<h3 id="required-flags">Required flags</h3>
<p>Flags are optional by default. If instead you wish your command to report an error
when a flag has not been set, mark it as required:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">Flags</span>().<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Region</span>, <span style="color:#e6db74">&#34;region&#34;</span>, <span style="color:#e6db74">&#34;r&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;AWS region (required)&#34;</span>)
<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">MarkFlagRequired</span>(<span style="color:#e6db74">&#34;region&#34;</span>)
</code></pre></div><p>Or, for persistent flags:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">PersistentFlags</span>().<span style="color:#a6e22e">StringVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Region</span>, <span style="color:#e6db74">&#34;region&#34;</span>, <span style="color:#e6db74">&#34;r&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;AWS region (required)&#34;</span>)
<span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">MarkPersistentFlagRequired</span>(<span style="color:#e6db74">&#34;region&#34;</span>)
</code></pre></div><h2 id="positional-and-custom-arguments">Positional and Custom Arguments</h2>
<p>Validation of positional arguments can be specified using the <code>Args</code> field
of <code>Command</code>.</p>
<p>The following validators are built in:</p>
<ul>
<li><code>NoArgs</code> - the command will report an error if there are any positional args.</li>
<li><code>ArbitraryArgs</code> - the command will accept any args.</li>
<li><code>OnlyValidArgs</code> - the command will report an error if there are any positional args that are not in the <code>ValidArgs</code> field of <code>Command</code>.</li>
<li><code>MinimumNArgs(int)</code> - the command will report an error if there are not at least N positional args.</li>
<li><code>MaximumNArgs(int)</code> - the command will report an error if there are more than N positional args.</li>
<li><code>ExactArgs(int)</code> - the command will report an error if there are not exactly N positional args.</li>
<li><code>ExactValidArgs(int)</code> - the command will report an error if there are not exactly N positional args OR if there are any positional args that are not in the <code>ValidArgs</code> field of <code>Command</code></li>
<li><code>RangeArgs(min, max)</code> - the command will report an error if the number of args is not between the minimum and maximum number of expected args.</li>
</ul>
<p>An example of setting the custom validator:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
  <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;hello&#34;</span>,
  <span style="color:#a6e22e">Args</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
    <span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">args</span>) &lt; <span style="color:#ae81ff">1</span> {
      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">errors</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;requires a color argument&#34;</span>)
    }
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">myapp</span>.<span style="color:#a6e22e">IsValidColor</span>(<span style="color:#a6e22e">args</span>[<span style="color:#ae81ff">0</span>]) {
      <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Errorf</span>(<span style="color:#e6db74">&#34;invalid color specified: %s&#34;</span>, <span style="color:#a6e22e">args</span>[<span style="color:#ae81ff">0</span>])
  },
  <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello, World!&#34;</span>)
  },
}
</code></pre></div><h2 id="example">Example</h2>
<p>In the example below, we have defined three commands. Two are at the top level
and one (cmdTimes) is a child of one of the top commands. In this case the root
is not executable, meaning that a subcommand is required. This is accomplished
by not providing a &lsquo;Run&rsquo; for the &lsquo;rootCmd&rsquo;.</p>
<p>We have only defined one flag for a single command.</p>
<p>More documentation about flags is available at <a href="https://github.com/spf13/pflag">https://github.com/spf13/pflag</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
  <span style="color:#e6db74">&#34;fmt&#34;</span>
  <span style="color:#e6db74">&#34;strings&#34;</span>

  <span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">echoTimes</span> <span style="color:#66d9ef">int</span>

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cmdPrint</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
    <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;print [string to print]&#34;</span>,
    <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;Print anything to the screen&#34;</span>,
    <span style="color:#a6e22e">Long</span>: <span style="color:#e6db74">`</span><span style="color:#e6db74">print is for printing anything back to the screen.
</span><span style="color:#e6db74">For many years people have printed back to the screen.</span><span style="color:#e6db74">`</span>,
    <span style="color:#a6e22e">Args</span>: <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">MinimumNArgs</span>(<span style="color:#ae81ff">1</span>),
    <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Print: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Join</span>(<span style="color:#a6e22e">args</span>, <span style="color:#e6db74">&#34; &#34;</span>))
    },
  }

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cmdEcho</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
    <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;echo [string to echo]&#34;</span>,
    <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;Echo anything to the screen&#34;</span>,
    <span style="color:#a6e22e">Long</span>: <span style="color:#e6db74">`</span><span style="color:#e6db74">echo is for echoing anything back.
</span><span style="color:#e6db74">Echo works a lot like print, except it has a child command.</span><span style="color:#e6db74">`</span>,
    <span style="color:#a6e22e">Args</span>: <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">MinimumNArgs</span>(<span style="color:#ae81ff">1</span>),
    <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Echo: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Join</span>(<span style="color:#a6e22e">args</span>, <span style="color:#e6db74">&#34; &#34;</span>))
    },
  }

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cmdTimes</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
    <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;times [string to echo]&#34;</span>,
    <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;Echo anything to the screen more times&#34;</span>,
    <span style="color:#a6e22e">Long</span>: <span style="color:#e6db74">`</span><span style="color:#e6db74">echo things multiple times back to the user by providing
</span><span style="color:#e6db74">a count and a string.</span><span style="color:#e6db74">`</span>,
    <span style="color:#a6e22e">Args</span>: <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">MinimumNArgs</span>(<span style="color:#ae81ff">1</span>),
    <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#a6e22e">echoTimes</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Echo: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Join</span>(<span style="color:#a6e22e">args</span>, <span style="color:#e6db74">&#34; &#34;</span>))
      }
    },
  }

  <span style="color:#a6e22e">cmdTimes</span>.<span style="color:#a6e22e">Flags</span>().<span style="color:#a6e22e">IntVarP</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">echoTimes</span>, <span style="color:#e6db74">&#34;times&#34;</span>, <span style="color:#e6db74">&#34;t&#34;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;times to echo the input&#34;</span>)

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">rootCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{<span style="color:#a6e22e">Use</span>: <span style="color:#e6db74">&#34;app&#34;</span>}
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">AddCommand</span>(<span style="color:#a6e22e">cmdPrint</span>, <span style="color:#a6e22e">cmdEcho</span>)
  <span style="color:#a6e22e">cmdEcho</span>.<span style="color:#a6e22e">AddCommand</span>(<span style="color:#a6e22e">cmdTimes</span>)
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">Execute</span>()
}
</code></pre></div><p>For a more complete example of a larger application, please checkout <a href="http://gohugo.io/">Hugo</a>.</p>
<h2 id="help-command">Help Command</h2>
<p>Cobra automatically adds a help command to your application when you have subcommands.
This will be called when a user runs &lsquo;app help&rsquo;. Additionally, help will also
support all other commands as input. Say, for instance, you have a command called
&lsquo;create&rsquo; without any additional configuration; Cobra will work when &lsquo;app help
create&rsquo; is called.  Every command will automatically have the &lsquo;&ndash;help&rsquo; flag added.</p>
<h3 id="example-1">Example</h3>
<p>The following output is automatically generated by Cobra. Nothing beyond the
command and flag definitions are needed.</p>
<pre><code>$ cobra help

Cobra is a CLI library for Go that empowers applications.
This application is a tool to generate the needed files
to quickly create a Cobra application.

Usage:
  cobra [command]

Available Commands:
  add         Add a command to a Cobra Application
  help        Help about any command
  init        Initialize a Cobra Application

Flags:
  -a, --author string    author name for copyright attribution (default &quot;YOUR NAME&quot;)
      --config string    config file (default is $HOME/.cobra.yaml)
  -h, --help             help for cobra
  -l, --license string   name of license for the project
      --viper            use Viper for configuration (default true)

Use &quot;cobra [command] --help&quot; for more information about a command.
</code></pre>
<p>Help is just a command like any other. There is no special logic or behavior
around it. In fact, you can provide your own if you want.</p>
<h3 id="defining-your-own-help">Defining your own help</h3>
<p>You can provide your own Help command or your own template for the default command to use
with following functions:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">SetHelpCommand</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>)
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">SetHelpFunc</span>(<span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>, []<span style="color:#66d9ef">string</span>))
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">SetHelpTemplate</span>(<span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p>The latter two will also apply to any children commands.</p>
<h2 id="usage-message">Usage Message</h2>
<p>When the user provides an invalid flag or invalid command, Cobra responds by
showing the user the &lsquo;usage&rsquo;.</p>
<h3 id="example-2">Example</h3>
<p>You may recognize this from the help above. That's because the default help
embeds the usage as part of its output.</p>
<pre><code>$ cobra --invalid
Error: unknown flag: --invalid
Usage:
  cobra [command]

Available Commands:
  add         Add a command to a Cobra Application
  help        Help about any command
  init        Initialize a Cobra Application

Flags:
  -a, --author string    author name for copyright attribution (default &quot;YOUR NAME&quot;)
      --config string    config file (default is $HOME/.cobra.yaml)
  -h, --help             help for cobra
  -l, --license string   name of license for the project
      --viper            use Viper for configuration (default true)

Use &quot;cobra [command] --help&quot; for more information about a command.
</code></pre>
<h3 id="defining-your-own-usage">Defining your own usage</h3>
<p>You can provide your own usage function or template for Cobra to use.
Like help, the function and template are overridable through public methods:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">SetUsageFunc</span>(<span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>) <span style="color:#66d9ef">error</span>)
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">SetUsageTemplate</span>(<span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><h2 id="version-flag">Version Flag</h2>
<p>Cobra adds a top-level &lsquo;&ndash;version&rsquo; flag if the Version field is set on the root command.
Running an application with the &lsquo;&ndash;version&rsquo; flag will print the version to stdout using
the version template. The template can be customized using the
<code>cmd.SetVersionTemplate(s string)</code> function.</p>
<h2 id="prerun-and-postrun-hooks">PreRun and PostRun Hooks</h2>
<p>It is possible to run functions before or after the main <code>Run</code> function of your command. The <code>PersistentPreRun</code> and <code>PreRun</code> functions will be executed before <code>Run</code>. <code>PersistentPostRun</code> and <code>PostRun</code> will be executed after <code>Run</code>.  The <code>Persistent*Run</code> functions will be inherited by children if they do not declare their own.  These functions are run in the following order:</p>
<ul>
<li><code>PersistentPreRun</code></li>
<li><code>PreRun</code></li>
<li><code>Run</code></li>
<li><code>PostRun</code></li>
<li><code>PersistentPostRun</code></li>
</ul>
<p>An example of two commands which use all of these features is below.  When the subcommand is executed, it will run the root command's <code>PersistentPreRun</code> but not the root command's <code>PersistentPostRun</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
  <span style="color:#e6db74">&#34;fmt&#34;</span>

  <span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">rootCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
    <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;root [sub]&#34;</span>,
    <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;My root command&#34;</span>,
    <span style="color:#a6e22e">PersistentPreRun</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside rootCmd PersistentPreRun with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
    <span style="color:#a6e22e">PreRun</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside rootCmd PreRun with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
    <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside rootCmd Run with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
    <span style="color:#a6e22e">PostRun</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside rootCmd PostRun with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
    <span style="color:#a6e22e">PersistentPostRun</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside rootCmd PersistentPostRun with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
  }

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">subCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
    <span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;sub [no options!]&#34;</span>,
    <span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;My subcommand&#34;</span>,
    <span style="color:#a6e22e">PreRun</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside subCmd PreRun with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
    <span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside subCmd Run with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
    <span style="color:#a6e22e">PostRun</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside subCmd PostRun with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
    <span style="color:#a6e22e">PersistentPostRun</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
      <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;Inside subCmd PersistentPostRun with args: %v\n&#34;</span>, <span style="color:#a6e22e">args</span>)
    },
  }

  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">AddCommand</span>(<span style="color:#a6e22e">subCmd</span>)

  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">SetArgs</span>([]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;&#34;</span>})
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">Execute</span>()
  <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>()
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">SetArgs</span>([]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;sub&#34;</span>, <span style="color:#e6db74">&#34;arg1&#34;</span>, <span style="color:#e6db74">&#34;arg2&#34;</span>})
  <span style="color:#a6e22e">rootCmd</span>.<span style="color:#a6e22e">Execute</span>()
}
</code></pre></div><p>Output:</p>
<pre><code>Inside rootCmd PersistentPreRun with args: []
Inside rootCmd PreRun with args: []
Inside rootCmd Run with args: []
Inside rootCmd PostRun with args: []
Inside rootCmd PersistentPostRun with args: []

Inside rootCmd PersistentPreRun with args: [arg1 arg2]
Inside subCmd PreRun with args: [arg1 arg2]
Inside subCmd Run with args: [arg1 arg2]
Inside subCmd PostRun with args: [arg1 arg2]
Inside subCmd PersistentPostRun with args: [arg1 arg2]
</code></pre><h2 id="suggestions-when-unknown-command-happens">Suggestions when &ldquo;unknown command&rdquo; happens</h2>
<p>Cobra will print automatic suggestions when &ldquo;unknown command&rdquo; errors happen. This allows Cobra to behave similarly to the <code>git</code> command when a typo happens. For example:</p>
<pre><code>$ hugo srever
Error: unknown command &quot;srever&quot; for &quot;hugo&quot;

Did you mean this?
        server

Run 'hugo --help' for usage.
</code></pre><p>Suggestions are automatic based on every subcommand registered and use an implementation of <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance</a>. Every registered command that matches a minimum distance of 2 (ignoring case) will be displayed as a suggestion.</p>
<p>If you need to disable suggestions or tweak the string distance in your command, use:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">DisableSuggestions</span> = <span style="color:#66d9ef">true</span>
</code></pre></div><p>or</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">command</span>.<span style="color:#a6e22e">SuggestionsMinimumDistance</span> = <span style="color:#ae81ff">1</span>
</code></pre></div><p>You can also explicitly set names for which a given command will be suggested using the <code>SuggestFor</code> attribute. This allows suggestions for strings that are not close in terms of string distance, but makes sense in your set of commands and for some which you don't want aliases. Example:</p>
<pre><code>$ kubectl remove
Error: unknown command &quot;remove&quot; for &quot;kubectl&quot;

Did you mean this?
        delete

Run 'kubectl help' for usage.
</code></pre><h2 id="generating-documentation-for-your-command">Generating documentation for your command</h2>
<p>Cobra can generate documentation based on subcommands, flags, etc. Read more about it in the <a href="doc/README.md">docs generation documentation</a>.</p>
<h2 id="generating-shell-completions">Generating shell completions</h2>
<p>Cobra can generate a shell-completion file for the following shells: Bash, Zsh, Fish, Powershell. If you add more information to your commands, these completions can be amazingly powerful and flexible.  Read more about it in <a href="shell_completions.md">Shell Completions</a>.</p>

    
        <h1 id="shell-completions">Shell completions</h1>
<p>Cobra can generate shell completions for multiple shells.
The currently supported shells are:</p>
<ul>
<li>Bash</li>
<li>Zsh</li>
<li>Fish</li>
<li>PowerShell</li>
</ul>
<p>If you are using the generator you can create a completion command by running</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cobra add completion
</code></pre></div><p>and then modifying the generated <code>cmd/completion.go</code> file to look something like this
(writing the shell script to stdout allows the most flexible use):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">completionCmd</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
	<span style="color:#a6e22e">Use</span>:                   <span style="color:#e6db74">&#34;completion [bash|zsh|fish|powershell]&#34;</span>,
	<span style="color:#a6e22e">Short</span>:                 <span style="color:#e6db74">&#34;Generate completion script&#34;</span>,
	<span style="color:#a6e22e">Long</span>: <span style="color:#e6db74">`</span><span style="color:#e6db74">To load completions:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Bash:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">$ source &lt;(yourprogram completion bash)
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># To load completions for each session, execute once:
</span><span style="color:#e6db74">Linux:
</span><span style="color:#e6db74">  $ yourprogram completion bash &gt; /etc/bash_completion.d/yourprogram
</span><span style="color:#e6db74">MacOS:
</span><span style="color:#e6db74">  $ yourprogram completion bash &gt; /usr/local/etc/bash_completion.d/yourprogram
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Zsh:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># If shell completion is not already enabled in your environment you will need
</span><span style="color:#e6db74"># to enable it.  You can execute the following once:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">$ echo &#34;autoload -U compinit; compinit&#34; &gt;&gt; ~/.zshrc
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># To load completions for each session, execute once:
</span><span style="color:#e6db74">$ yourprogram completion zsh &gt; &#34;$</span><span style="color:#e6db74">{</span><span style="color:#e6db74">fpath[1]}/_yourprogram&#34;
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># You will need to start a new shell for this setup to take effect.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Fish:
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">$ yourprogram completion fish | source
</span><span style="color:#e6db74">
</span><span style="color:#e6db74"># To load completions for each session, execute once:
</span><span style="color:#e6db74">$ yourprogram completion fish &gt; ~/.config/fish/completions/yourprogram.fish
</span><span style="color:#e6db74"></span><span style="color:#e6db74">`</span>,
	<span style="color:#a6e22e">DisableFlagsInUseLine</span>: <span style="color:#66d9ef">true</span>,
	<span style="color:#a6e22e">ValidArgs</span>:             []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;bash&#34;</span>, <span style="color:#e6db74">&#34;zsh&#34;</span>, <span style="color:#e6db74">&#34;fish&#34;</span>, <span style="color:#e6db74">&#34;powershell&#34;</span>},
	<span style="color:#a6e22e">Args</span>:                  <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ExactValidArgs</span>(<span style="color:#ae81ff">1</span>),
	<span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
		<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">args</span>[<span style="color:#ae81ff">0</span>] {
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;bash&#34;</span>:
			<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">Root</span>().<span style="color:#a6e22e">GenBashCompletion</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;zsh&#34;</span>:
			<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">Root</span>().<span style="color:#a6e22e">GenZshCompletion</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;fish&#34;</span>:
			<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">Root</span>().<span style="color:#a6e22e">GenFishCompletion</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#66d9ef">true</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;powershell&#34;</span>:
			<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">Root</span>().<span style="color:#a6e22e">GenPowerShellCompletion</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>)
		}
	},
}
</code></pre></div><p><strong>Note:</strong> The cobra generator may include messages printed to stdout for example if the config file is loaded, this will break the auto complete script so must be removed.</p>
<h2 id="customizing-completions">Customizing completions</h2>
<p>The generated completion scripts will automatically handle completing commands and flags.  However, you can make your completions much more powerful by providing information to complete your program's nouns and flag values.</p>
<h3 id="completion-of-nouns">Completion of nouns</h3>
<h4 id="static-completion-of-nouns">Static completion of nouns</h4>
<p>Cobra allows you to provide a pre-defined list of completion choices for your nouns using the <code>ValidArgs</code> field.
For example, if you want <code>kubectl get [tab][tab]</code> to show a list of valid &ldquo;nouns&rdquo; you have to set them.
Some simplified code from <code>kubectl get</code> looks like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">validArgs</span> []<span style="color:#66d9ef">string</span> = { <span style="color:#e6db74">&#34;pod&#34;</span>, <span style="color:#e6db74">&#34;node&#34;</span>, <span style="color:#e6db74">&#34;service&#34;</span>, <span style="color:#e6db74">&#34;replicationcontroller&#34;</span> }

<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
	<span style="color:#a6e22e">Use</span>:     <span style="color:#e6db74">&#34;get [(-o|--output=)json|yaml|template|...] (RESOURCE [NAME] | RESOURCE/NAME ...)&#34;</span>,
	<span style="color:#a6e22e">Short</span>:   <span style="color:#e6db74">&#34;Display one or many resources&#34;</span>,
	<span style="color:#a6e22e">Long</span>:    <span style="color:#a6e22e">get_long</span>,
	<span style="color:#a6e22e">Example</span>: <span style="color:#a6e22e">get_example</span>,
	<span style="color:#a6e22e">Run</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
		<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">RunGet</span>(<span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">out</span>, <span style="color:#a6e22e">cmd</span>, <span style="color:#a6e22e">args</span>)
		<span style="color:#a6e22e">util</span>.<span style="color:#a6e22e">CheckErr</span>(<span style="color:#a6e22e">err</span>)
	},
	<span style="color:#a6e22e">ValidArgs</span>: <span style="color:#a6e22e">validArgs</span>,
}
</code></pre></div><p>Notice we put the <code>ValidArgs</code> field on the <code>get</code> sub-command. Doing so will give results like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get <span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span><span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span>
node   pod   replicationcontroller   service
</code></pre></div><h5 id="aliases-for-nouns">Aliases for nouns</h5>
<p>If your nouns have aliases, you can define them alongside <code>ValidArgs</code> using <code>ArgAliases</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">argAliases</span> []<span style="color:#66d9ef">string</span> = { <span style="color:#e6db74">&#34;pods&#34;</span>, <span style="color:#e6db74">&#34;nodes&#34;</span>, <span style="color:#e6db74">&#34;services&#34;</span>, <span style="color:#e6db74">&#34;svc&#34;</span>, <span style="color:#e6db74">&#34;replicationcontrollers&#34;</span>, <span style="color:#e6db74">&#34;rc&#34;</span> }

<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
    <span style="color:#f92672">...</span>
	<span style="color:#a6e22e">ValidArgs</span>:  <span style="color:#a6e22e">validArgs</span>,
	<span style="color:#a6e22e">ArgAliases</span>: <span style="color:#a6e22e">argAliases</span>
}
</code></pre></div><p>The aliases are not shown to the user on tab completion, but they are accepted as valid nouns by
the completion algorithm if entered manually, e.g. in:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get rc <span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span><span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span>
backend        frontend       database 
</code></pre></div><p>Note that without declaring <code>rc</code> as an alias, the completion algorithm would not know to show the list of
replication controllers following <code>rc</code>.</p>
<h4 id="dynamic-completion-of-nouns">Dynamic completion of nouns</h4>
<p>In some cases it is not possible to provide a list of completions in advance.  Instead, the list of completions must be determined at execution-time. In a similar fashion as for static completions, you can use the <code>ValidArgsFunction</code> field to provide a Go function that Cobra will execute when it needs the list of completion choices for the nouns of a command.  Note that either <code>ValidArgs</code> or <code>ValidArgsFunction</code> can be used for a single cobra command, but not both.
Simplified code from <code>helm status</code> looks like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">cmd</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
	<span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;status RELEASE_NAME&#34;</span>,
	<span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;Display the status of the named release&#34;</span>,
	<span style="color:#a6e22e">Long</span>:  <span style="color:#a6e22e">status_long</span>,
	<span style="color:#a6e22e">RunE</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>) {
		<span style="color:#a6e22e">RunGet</span>(<span style="color:#a6e22e">args</span>[<span style="color:#ae81ff">0</span>])
	},
	<span style="color:#a6e22e">ValidArgsFunction</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">toComplete</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirective</span>) {
		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">args</span>) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span> {
			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirectiveNoFileComp</span>
		}
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">getReleasesFromCluster</span>(<span style="color:#a6e22e">toComplete</span>), <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirectiveNoFileComp</span>
	},
}
</code></pre></div><p>Where <code>getReleasesFromCluster()</code> is a Go function that obtains the list of current Helm releases running on the Kubernetes cluster.
Notice we put the <code>ValidArgsFunction</code> on the <code>status</code> sub-command. Let's assume the Helm releases on the cluster are: <code>harbor</code>, <code>notary</code>, <code>rook</code> and <code>thanos</code> then this dynamic completion will give results like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ helm status <span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span><span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span>
harbor notary rook thanos
</code></pre></div><p>You may have noticed the use of <code>cobra.ShellCompDirective</code>.  These directives are bit fields allowing to control some shell completion behaviors for your particular completion.  You can combine them with the bit-or operator such as <code>cobra.ShellCompDirectiveNoSpace | cobra.ShellCompDirectiveNoFileComp</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Indicates that the shell will perform its default behavior after completions
</span><span style="color:#75715e"></span><span style="color:#75715e">// have been provided (this implies none of the other directives).
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ShellCompDirectiveDefault</span>

<span style="color:#75715e">// Indicates an error occurred and completions should be ignored.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ShellCompDirectiveError</span>

<span style="color:#75715e">// Indicates that the shell should not add a space after the completion,
</span><span style="color:#75715e"></span><span style="color:#75715e">// even if there is a single completion provided.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ShellCompDirectiveNoSpace</span>

<span style="color:#75715e">// Indicates that the shell should not provide file completion even when
</span><span style="color:#75715e"></span><span style="color:#75715e">// no completion is provided.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ShellCompDirectiveNoFileComp</span>

<span style="color:#75715e">// Indicates that the returned completions should be used as file extension filters.
</span><span style="color:#75715e"></span><span style="color:#75715e">// For example, to complete only files of the form *.json or *.yaml:
</span><span style="color:#75715e"></span><span style="color:#75715e">//    return []string{&#34;yaml&#34;, &#34;json&#34;}, ShellCompDirectiveFilterFileExt
</span><span style="color:#75715e"></span><span style="color:#75715e">// For flags, using MarkFlagFilename() and MarkPersistentFlagFilename()
</span><span style="color:#75715e"></span><span style="color:#75715e">// is a shortcut to using this directive explicitly.
</span><span style="color:#75715e"></span><span style="color:#75715e">//
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ShellCompDirectiveFilterFileExt</span>

<span style="color:#75715e">// Indicates that only directory names should be provided in file completion.
</span><span style="color:#75715e"></span><span style="color:#75715e">// For example:
</span><span style="color:#75715e"></span><span style="color:#75715e">//    return nil, ShellCompDirectiveFilterDirs
</span><span style="color:#75715e"></span><span style="color:#75715e">// For flags, using MarkFlagDirname() is a shortcut to using this directive explicitly.
</span><span style="color:#75715e"></span><span style="color:#75715e">//
</span><span style="color:#75715e"></span><span style="color:#75715e">// To request directory names within another directory, the returned completions
</span><span style="color:#75715e"></span><span style="color:#75715e">// should specify a single directory name within which to search. For example,
</span><span style="color:#75715e"></span><span style="color:#75715e">// to complete directories within &#34;themes/&#34;:
</span><span style="color:#75715e"></span><span style="color:#75715e">//    return []string{&#34;themes&#34;}, ShellCompDirectiveFilterDirs
</span><span style="color:#75715e"></span><span style="color:#75715e">//
</span><span style="color:#75715e"></span><span style="color:#a6e22e">ShellCompDirectiveFilterDirs</span>
</code></pre></div><p><em><strong>Note</strong></em>: When using the <code>ValidArgsFunction</code>, Cobra will call your registered function after having parsed all flags and arguments provided in the command-line.  You therefore don't need to do this parsing yourself.  For example, when a user calls <code>helm status --namespace my-rook-ns [tab][tab]</code>, Cobra will call your registered <code>ValidArgsFunction</code> after having parsed the <code>--namespace</code> flag, as it would have done when calling the <code>RunE</code> function.</p>
<h5 id="debugging">Debugging</h5>
<p>Cobra achieves dynamic completion through the use of a hidden command called by the completion script.  To debug your Go completion code, you can call this hidden command directly:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ helm __complete status har&lt;ENTER&gt;
harbor
:4
Completion ended with directive: ShellCompDirectiveNoFileComp <span style="color:#75715e"># This is on stderr</span>
</code></pre></div><p><em><strong>Important:</strong></em> If the noun to complete is empty (when the user has not yet typed any letters of that noun), you must pass an empty parameter to the <code>__complete</code> command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ helm __complete status <span style="color:#e6db74">&#34;&#34;</span>&lt;ENTER&gt;
harbor
notary
rook
thanos
:4
Completion ended with directive: ShellCompDirectiveNoFileComp <span style="color:#75715e"># This is on stderr</span>
</code></pre></div><p>Calling the <code>__complete</code> command directly allows you to run the Go debugger to troubleshoot your code.  You can also add printouts to your code; Cobra provides the following functions to use for printouts in Go completion code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Prints to the completion script debug file (if BASH_COMP_DEBUG_FILE
</span><span style="color:#75715e"></span><span style="color:#75715e">// is set to a file path) and optionally prints to stderr.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">CompDebug</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">printToStdErr</span> <span style="color:#66d9ef">bool</span>) {
<span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">CompDebugln</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">printToStdErr</span> <span style="color:#66d9ef">bool</span>)

<span style="color:#75715e">// Prints to the completion script debug file (if BASH_COMP_DEBUG_FILE
</span><span style="color:#75715e"></span><span style="color:#75715e">// is set to a file path) and to stderr.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">CompError</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>)
<span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">CompErrorln</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>)
</code></pre></div><p><em><strong>Important:</strong></em> You should <strong>not</strong> leave traces that print directly to stdout in your completion code as they will be interpreted as completion choices by the completion script.  Instead, use the cobra-provided debugging traces functions mentioned above.</p>
<h3 id="completions-for-flags">Completions for flags</h3>
<h4 id="mark-flags-as-required">Mark flags as required</h4>
<p>Most of the time completions will only show sub-commands. But if a flag is required to make a sub-command work, you probably want it to show up when the user types [tab][tab].  You can mark a flag as &lsquo;Required&rsquo; like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">MarkFlagRequired</span>(<span style="color:#e6db74">&#34;pod&#34;</span>)
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">MarkFlagRequired</span>(<span style="color:#e6db74">&#34;container&#34;</span>)
</code></pre></div><p>and you'll get something like</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl exec <span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span><span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span>
-c            --container<span style="color:#f92672">=</span>  -p            --pod<span style="color:#f92672">=</span>  
</code></pre></div><h4 id="specify-dynamic-flag-completion">Specify dynamic flag completion</h4>
<p>As for nouns, Cobra provides a way of defining dynamic completion of flags.  To provide a Go function that Cobra will execute when it needs the list of completion choices for a flag, you must register the function using the <code>command.RegisterFlagCompletionFunc()</code> function.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">flagName</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;output&#34;</span>
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">RegisterFlagCompletionFunc</span>(<span style="color:#a6e22e">flagName</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">toComplete</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirective</span>) {
	<span style="color:#66d9ef">return</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;json&#34;</span>, <span style="color:#e6db74">&#34;table&#34;</span>, <span style="color:#e6db74">&#34;yaml&#34;</span>}, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirectiveDefault</span>
})
</code></pre></div><p>Notice that calling <code>RegisterFlagCompletionFunc()</code> is done through the <code>command</code> with which the flag is associated.  In our example this dynamic completion will give results like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ helm status --output <span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span><span style="color:#f92672">[</span>tab<span style="color:#f92672">]</span>
json table yaml
</code></pre></div><h5 id="debugging-1">Debugging</h5>
<p>You can also easily debug your Go completion code for flags:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ helm __complete status --output <span style="color:#e6db74">&#34;&#34;</span>
json
table
yaml
:4
Completion ended with directive: ShellCompDirectiveNoFileComp <span style="color:#75715e"># This is on stderr</span>
</code></pre></div><p><em><strong>Important:</strong></em> You should <strong>not</strong> leave traces that print to stdout in your completion code as they will be interpreted as completion choices by the completion script.  Instead, use the cobra-provided debugging traces functions mentioned further above.</p>
<h4 id="specify-valid-filename-extensions-for-flags-that-take-a-filename">Specify valid filename extensions for flags that take a filename</h4>
<p>To limit completions of flag values to file names with certain extensions you can either use the different <code>MarkFlagFilename()</code> functions or a combination of <code>RegisterFlagCompletionFunc()</code> and <code>ShellCompDirectiveFilterFileExt</code>, like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">flagName</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;output&#34;</span>
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">MarkFlagFilename</span>(<span style="color:#a6e22e">flagName</span>, <span style="color:#e6db74">&#34;yaml&#34;</span>, <span style="color:#e6db74">&#34;json&#34;</span>)
</code></pre></div><p>or</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">flagName</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;output&#34;</span>
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">RegisterFlagCompletionFunc</span>(<span style="color:#a6e22e">flagName</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">toComplete</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirective</span>) {
	<span style="color:#66d9ef">return</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;yaml&#34;</span>, <span style="color:#e6db74">&#34;json&#34;</span>}, <span style="color:#a6e22e">ShellCompDirectiveFilterFileExt</span>})
</code></pre></div><h4 id="limit-flag-completions-to-directory-names">Limit flag completions to directory names</h4>
<p>To limit completions of flag values to directory names you can either use the <code>MarkFlagDirname()</code> functions or a combination of <code>RegisterFlagCompletionFunc()</code> and <code>ShellCompDirectiveFilterDirs</code>, like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">flagName</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;output&#34;</span>
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">MarkFlagDirname</span>(<span style="color:#a6e22e">flagName</span>)
</code></pre></div><p>or</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">flagName</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;output&#34;</span>
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">RegisterFlagCompletionFunc</span>(<span style="color:#a6e22e">flagName</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">toComplete</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirective</span>) {
	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirectiveFilterDirs</span>
})
</code></pre></div><p>To limit completions of flag values to directory names <em>within another directory</em> you can use a combination of <code>RegisterFlagCompletionFunc()</code> and <code>ShellCompDirectiveFilterDirs</code> like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">flagName</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;output&#34;</span>
<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">RegisterFlagCompletionFunc</span>(<span style="color:#a6e22e">flagName</span>, <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">toComplete</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirective</span>) {
	<span style="color:#66d9ef">return</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;themes&#34;</span>}, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirectiveFilterDirs</span>
})
</code></pre></div><h4 id="descriptions-for-completions">Descriptions for completions</h4>
<p>Both <code>zsh</code> and <code>fish</code> allow for descriptions to annotate completion choices.  For commands and flags, Cobra will provide the descriptions automatically, based on usage information.  For example, using zsh:</p>
<pre><code>$ helm s[tab]
search  -- search for a keyword in charts
show    -- show information of a chart
status  -- displays the status of the named release
</code></pre><p>while using fish:</p>
<pre><code>$ helm s[tab]
search  (search for a keyword in charts)  show  (show information of a chart)  status  (displays the status of the named release)
</code></pre><p>Cobra allows you to add annotations to your own completions.  Simply add the annotation text after each completion, following a <code>\t</code> separator.  This technique applies to completions returned by <code>ValidArgs</code>, <code>ValidArgsFunction</code> and <code>RegisterFlagCompletionFunc()</code>.  For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ValidArgsFunction</span>: <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">args</span> []<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">toComplete</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirective</span>) {
	<span style="color:#66d9ef">return</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;harbor\tAn image registry&#34;</span>, <span style="color:#e6db74">&#34;thanos\tLong-term metrics&#34;</span>}, <span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">ShellCompDirectiveNoFileComp</span>
}}
</code></pre></div><p>or</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ValidArgs</span>: []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;bash\tCompletions for bash&#34;</span>, <span style="color:#e6db74">&#34;zsh\tCompletions for zsh&#34;</span>}
</code></pre></div><h3 id="bash">Bash</h3>
<h4 id="dependencies">Dependencies</h4>
<p>The bash completion script generated by Cobra requires the <code>bash_completion</code> package. You should update the help text of your completion command to show how to install the <code>bash_completion</code> package (<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#enabling-shell-autocompletion">Kubectl docs</a>)</p>
<h4 id="aliases">Aliases</h4>
<p>You can also configure <code>bash</code> aliases for your program and they will also support completions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">alias aliasname<span style="color:#f92672">=</span>origcommand
complete -o default -F __start_origcommand aliasname

<span style="color:#75715e"># and now when you run `aliasname` completion will make</span>
<span style="color:#75715e"># suggestions as it did for `origcommand`.</span>

$ aliasname &lt;tab&gt;&lt;tab&gt;
completion     firstcommand   secondcommand
</code></pre></div><h4 id="bash-legacy-dynamic-completions">Bash legacy dynamic completions</h4>
<p>For backwards-compatibility, Cobra still supports its bash legacy dynamic completion solution.
Please refer to <a href="bash_completions.md">Bash Completions</a> for details.</p>
<h3 id="zsh">Zsh</h3>
<p>Cobra supports native Zsh completion generated from the root <code>cobra.Command</code>.
The generated completion script should be put somewhere in your <code>$fpath</code> and be named
<code>_&lt;yourProgram&gt;</code>.  You will need to start a new shell for the completions to become available.</p>
<p>Zsh supports descriptions for completions. Cobra will provide the description automatically,
based on usage information. Cobra provides a way to completely disable such descriptions by
using <code>GenZshCompletionNoDesc()</code> or <code>GenZshCompletionFileNoDesc()</code>. You can choose to make
this a configurable option to your users.</p>
<pre><code># With descriptions
$ helm s[tab]
search  -- search for a keyword in charts
show    -- show information of a chart
status  -- displays the status of the named release

# Without descriptions
$ helm s[tab]
search  show  status
</code></pre><p><em>Note</em>: Because of backwards-compatibility requirements, we were forced to have a different API to disable completion descriptions between <code>Zsh</code> and <code>Fish</code>.</p>
<h4 id="limitations">Limitations</h4>
<ul>
<li>Custom completions implemented in Bash scripting (legacy) are not supported and will be ignored for <code>zsh</code> (including the use of the <code>BashCompCustom</code> flag annotation).
<ul>
<li>You should instead use <code>ValidArgsFunction</code> and <code>RegisterFlagCompletionFunc()</code> which are portable to the different shells (<code>bash</code>, <code>zsh</code>, <code>fish</code>).</li>
</ul>
</li>
<li>The function <code>MarkFlagCustom()</code> is not supported and will be ignored for <code>zsh</code>.
<ul>
<li>You should instead use <code>RegisterFlagCompletionFunc()</code>.</li>
</ul>
</li>
</ul>
<h4 id="zsh-completions-standardization">Zsh completions standardization</h4>
<p>Cobra 1.1 standardized its zsh completion support to align it with its other shell completions.  Although the API was kept backwards-compatible, some small changes in behavior were introduced.
Please refer to <a href="zsh_completions.md">Zsh Completions</a> for details.</p>
<h3 id="fish">Fish</h3>
<p>Cobra supports native Fish completions generated from the root <code>cobra.Command</code>.  You can use the <code>command.GenFishCompletion()</code> or <code>command.GenFishCompletionFile()</code> functions. You must provide these functions with a parameter indicating if the completions should be annotated with a description; Cobra will provide the description automatically based on usage information.  You can choose to make this option configurable by your users.</p>
<pre><code># With descriptions
$ helm s[tab]
search  (search for a keyword in charts)  show  (show information of a chart)  status  (displays the status of the named release)

# Without descriptions
$ helm s[tab]
search  show  status
</code></pre><p><em>Note</em>: Because of backwards-compatibility requirements, we were forced to have a different API to disable completion descriptions between <code>Zsh</code> and <code>Fish</code>.</p>
<h4 id="limitations-1">Limitations</h4>
<ul>
<li>Custom completions implemented in Bash scripting (legacy) are not supported and will be ignored for <code>fish</code> (including the use of the <code>BashCompCustom</code> flag annotation).
<ul>
<li>You should instead use <code>ValidArgsFunction</code> and <code>RegisterFlagCompletionFunc()</code> which are portable to the different shells (<code>bash</code>, <code>zsh</code>, <code>fish</code>).</li>
</ul>
</li>
<li>The function <code>MarkFlagCustom()</code> is not supported and will be ignored for <code>fish</code>.
<ul>
<li>You should instead use <code>RegisterFlagCompletionFunc()</code>.</li>
</ul>
</li>
<li>The following flag completion annotations are not supported and will be ignored for <code>fish</code>:
<ul>
<li><code>BashCompFilenameExt</code> (filtering by file extension)</li>
<li><code>BashCompSubdirsInDir</code> (filtering by directory)</li>
</ul>
</li>
<li>The functions corresponding to the above annotations are consequently not supported and will be ignored for <code>fish</code>:
<ul>
<li><code>MarkFlagFilename()</code> and <code>MarkPersistentFlagFilename()</code> (filtering by file extension)</li>
<li><code>MarkFlagDirname()</code> and <code>MarkPersistentFlagDirname()</code> (filtering by directory)</li>
</ul>
</li>
<li>Similarly, the following completion directives are not supported and will be ignored for <code>fish</code>:
<ul>
<li><code>ShellCompDirectiveFilterFileExt</code> (filtering by file extension)</li>
<li><code>ShellCompDirectiveFilterDirs</code> (filtering by directory)</li>
</ul>
</li>
</ul>
<h3 id="powershell">PowerShell</h3>
<p>Please refer to <a href="powershell_completions.md">PowerShell Completions</a> for details.</p>

    
        <h2 id="bash-completions">Bash completions</h2>
<p>Please refer to <a href="shell_completions.md">Shell Completions</a> for details.</p>
<h3 id="bash-legacy-dynamic-completions">Bash legacy dynamic completions</h3>
<p>For backwards-compatibility, Cobra still supports its legacy dynamic completion solution (described below).  Unlike the <code>ValidArgsFunction</code> solution, the legacy solution will only work for Bash shell-completion and not for other shells. This legacy solution can be used along-side <code>ValidArgsFunction</code> and <code>RegisterFlagCompletionFunc()</code>, as long as both solutions are not used for the same command.  This provides a path to gradually migrate from the legacy solution to the new solution.</p>
<p>The legacy solution allows you to inject bash functions into the bash completion script.  Those bash functions are responsible for providing the completion choices for your own completions.</p>
<p>Some code that works in kubernetes:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">const <span style="color:#f92672">(</span>
        bash_completion_func <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span>__kubectl_parse_get<span style="color:#f92672">(</span><span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    local kubectl_output out
    <span style="color:#66d9ef">if</span> kubectl_output<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl get --no-headers <span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span> 2&gt;/dev/null<span style="color:#66d9ef">)</span>; <span style="color:#66d9ef">then</span>
        out<span style="color:#f92672">=</span><span style="color:#f92672">(</span><span style="color:#66d9ef">$(</span>echo <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>kubectl_output<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> | awk <span style="color:#e6db74">&#39;{print $1}&#39;</span><span style="color:#66d9ef">)</span><span style="color:#f92672">)</span>
        COMPREPLY<span style="color:#f92672">=</span><span style="color:#f92672">(</span> <span style="color:#66d9ef">$(</span> compgen -W <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>out[*]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> -- <span style="color:#e6db74">&#34;</span>$cur<span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span> <span style="color:#f92672">)</span>
    <span style="color:#66d9ef">fi</span>
<span style="color:#f92672">}</span>

__kubectl_get_resource<span style="color:#f92672">(</span><span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span><span style="color:#f92672">[</span> <span style="color:#e6db74">${#</span>nouns[@]<span style="color:#e6db74">}</span> -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span><span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">fi</span>
    __kubectl_parse_get <span style="color:#e6db74">${</span>nouns[<span style="color:#e6db74">${#</span>nouns[@]<span style="color:#e6db74">}</span> -1]<span style="color:#e6db74">}</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span><span style="color:#f92672">[</span> $? -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]</span><span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">fi</span>
<span style="color:#f92672">}</span>

__kubectl_custom_func<span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">${</span>last_command<span style="color:#e6db74">}</span> in
        kubectl_get | kubectl_describe | kubectl_delete | kubectl_stop<span style="color:#f92672">)</span>
            __kubectl_get_resource
            <span style="color:#66d9ef">return</span>
            ;;
        *<span style="color:#f92672">)</span>
            ;;
    <span style="color:#66d9ef">esac</span>
<span style="color:#f92672">}</span>
<span style="color:#e6db74">`</span><span style="color:#f92672">)</span>
</code></pre></div><p>And then I set that in my command definition:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">cmds</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
	<span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;kubectl&#34;</span>,
	<span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;kubectl controls the Kubernetes cluster manager&#34;</span>,
	<span style="color:#a6e22e">Long</span>: <span style="color:#e6db74">`</span><span style="color:#e6db74">kubectl controls the Kubernetes cluster manager.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">Find more information at https://github.com/GoogleCloudPlatform/kubernetes.</span><span style="color:#e6db74">`</span>,
	<span style="color:#a6e22e">Run</span>: <span style="color:#a6e22e">runHelp</span>,
	<span style="color:#a6e22e">BashCompletionFunction</span>: <span style="color:#a6e22e">bash_completion_func</span>,
}
</code></pre></div><p>The <code>BashCompletionFunction</code> option is really only valid/useful on the root command. Doing the above will cause <code>__kubectl_custom_func()</code> (<code>__&lt;command-use&gt;_custom_func()</code>) to be called when the built in processor was unable to find a solution. In the case of kubernetes a valid command might look something like <code>kubectl get pod [mypod]</code>. If you type <code>kubectl get pod [tab][tab]</code> the <code>__kubectl_customc_func()</code> will run because the cobra.Command only understood &ldquo;kubectl&rdquo; and &ldquo;get.&rdquo; <code>__kubectl_custom_func()</code> will see that the cobra.Command is &ldquo;kubectl_get&rdquo; and will thus call another helper <code>__kubectl_get_resource()</code>.  <code>__kubectl_get_resource</code> will look at the &lsquo;nouns&rsquo; collected. In our example the only noun will be <code>pod</code>.  So it will call <code>__kubectl_parse_get pod</code>.  <code>__kubectl_parse_get</code> will actually call out to kubernetes and get any pods.  It will then set <code>COMPREPLY</code> to valid pods!</p>
<p>Similarly, for flags:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#a6e22e">annotation</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>][]<span style="color:#66d9ef">string</span>)
	<span style="color:#a6e22e">annotation</span>[<span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">BashCompCustom</span>] = []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;__kubectl_get_namespaces&#34;</span>}

	<span style="color:#a6e22e">flag</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">pflag</span>.<span style="color:#a6e22e">Flag</span>{
		<span style="color:#a6e22e">Name</span>:        <span style="color:#e6db74">&#34;namespace&#34;</span>,
		<span style="color:#a6e22e">Usage</span>:       <span style="color:#a6e22e">usage</span>,
		<span style="color:#a6e22e">Annotations</span>: <span style="color:#a6e22e">annotation</span>,
	}
	<span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">Flags</span>().<span style="color:#a6e22e">AddFlag</span>(<span style="color:#a6e22e">flag</span>)
</code></pre></div><p>In addition add the <code>__kubectl_get_namespaces</code> implementation in the <code>BashCompletionFunction</code>
value, e.g.:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">__kubectl_get_namespaces<span style="color:#f92672">(</span><span style="color:#f92672">)</span>
<span style="color:#f92672">{</span>
    local template
    template<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ range .items  }}{{ .metadata.name }} {{ end }}&#34;</span>
    local kubectl_out
    <span style="color:#66d9ef">if</span> kubectl_out<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl get -o template --template<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>template<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> namespace 2&gt;/dev/null<span style="color:#66d9ef">)</span>; <span style="color:#66d9ef">then</span>
        COMPREPLY<span style="color:#f92672">=</span><span style="color:#f92672">(</span> <span style="color:#66d9ef">$(</span> compgen -W <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>kubectl_out<span style="color:#e6db74">}</span><span style="color:#e6db74">[*]</span><span style="color:#e6db74">&#34;</span> -- <span style="color:#e6db74">&#34;</span>$cur<span style="color:#e6db74">&#34;</span> <span style="color:#66d9ef">)</span> <span style="color:#f92672">)</span>
    <span style="color:#66d9ef">fi</span>
<span style="color:#f92672">}</span>
</code></pre></div>
    
        <h2 id="fish-completions">Fish completions</h2>
<p>Please refer to <a href="shell_completions.md">Shell Completions</a> for details.</p>

    
        <h2 id="powershell-completions">PowerShell completions</h2>
<p>Cobra can generate PowerShell completion scripts. Users need PowerShell version 5.0 or above, which comes with Windows 10 and can be downloaded separately for Windows 7 or 8.1. They can then write the completions to a file and source this file from their PowerShell profile, which is referenced by the <code>$Profile</code> environment variable. See <code>Get-Help about_Profiles</code> for more info about PowerShell profiles.</p>
<p><em>Note</em>: PowerShell completions have not (yet?) been aligned to Cobra's generic shell completion support.  This implies the PowerShell completions are not as rich as for other shells (see <a href="#whats-not-yet-supported">What's not yet supported</a>), and may behave slightly differently.  They are still very useful for PowerShell users.</p>
<h3 id="whats-supported">What's supported</h3>
<ul>
<li>Completion for subcommands using their <code>.Short</code> description</li>
<li>Completion for non-hidden flags using their <code>.Name</code> and <code>.Shorthand</code></li>
</ul>
<h3 id="whats-not-yet-supported">What's not yet supported</h3>
<ul>
<li>Command aliases</li>
<li>Required, filename or custom flags (they will work like normal flags)</li>
<li>Custom completion scripts</li>
</ul>

    
        <h2 id="zsh-completions">Zsh completions</h2>
<p>Please refer to <a href="shell_completions.md">Shell Completions</a> for details.</p>
<h3 id="zsh-completions-standardization">Zsh completions standardization</h3>
<p>Cobra 1.1 standardized its zsh completion support to align it with its other shell completions.  Although the API was kept backwards-compatible, some small changes in behavior were introduced.</p>
<h4 id="deprecation-summary">Deprecation summary</h4>
<p>See further below for more details on these deprecations.</p>
<ul>
<li><code>cmd.MarkZshCompPositionalArgumentFile(pos, []string{})</code> is no longer needed.  It is therefore <strong>deprecated</strong> and silently ignored.</li>
<li><code>cmd.MarkZshCompPositionalArgumentFile(pos, glob[])</code> is <strong>deprecated</strong> and silently ignored.
<ul>
<li>Instead use <code>ValidArgsFunction</code> with <code>ShellCompDirectiveFilterFileExt</code>.</li>
</ul>
</li>
<li><code>cmd.MarkZshCompPositionalArgumentWords()</code> is <strong>deprecated</strong> and silently ignored.
<ul>
<li>Instead use <code>ValidArgsFunction</code>.</li>
</ul>
</li>
</ul>
<h4 id="behavioral-changes">Behavioral changes</h4>
<h5 id="noun-completion">Noun completion*</h5>
<table>
<thead>
<tr>
<th>Old behavior</th>
<th>New behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>No file completion by default (opposite of bash)</td>
<td>File completion by default; use <code>ValidArgsFunction</code> with <code>ShellCompDirectiveNoFileComp</code> to turn off file completion on a per-argument basis</td>
</tr>
<tr>
<td>Completion of flag names without the <code>-</code> prefix having been typed</td>
<td>Flag names are only completed if the user has typed the first <code>-</code></td>
</tr>
<tr>
<td><code>cmd.MarkZshCompPositionalArgumentFile(pos, []string{})</code> used to turn on file completion on a per-argument position basis</td>
<td>File completion for all arguments by default; <code>cmd.MarkZshCompPositionalArgumentFile()</code> is <strong>deprecated</strong> and silently ignored</td>
</tr>
<tr>
<td><code>cmd.MarkZshCompPositionalArgumentFile(pos, glob[])</code> used to turn on file completion <strong>with glob filtering</strong> on a per-argument position basis (zsh-specific)</td>
<td><code>cmd.MarkZshCompPositionalArgumentFile()</code> is <strong>deprecated</strong> and silently ignored; use <code>ValidArgsFunction</code> with <code>ShellCompDirectiveFilterFileExt</code> for file <strong>extension</strong> filtering (not full glob filtering)</td>
</tr>
<tr>
<td><code>cmd.MarkZshCompPositionalArgumentWords(pos, words[])</code> used to provide completion choices on a per-argument position basis (zsh-specific)</td>
<td><code>cmd.MarkZshCompPositionalArgumentWords()</code> is <strong>deprecated</strong> and silently ignored; use <code>ValidArgsFunction</code> to achieve the same behavior</td>
</tr>
</tbody>
</table>
<h5 id="flag-value-completion">Flag-value completion</h5>
<table>
<thead>
<tr>
<th>Old behavior</th>
<th>New behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>No file completion by default (opposite of bash)</td>
<td>File completion by default; use <code>RegisterFlagCompletionFunc()</code> with <code>ShellCompDirectiveNoFileComp</code> to turn off file completion</td>
</tr>
<tr>
<td><code>cmd.MarkFlagFilename(flag, []string{})</code> and similar used to turn on file completion</td>
<td>File completion by default; <code>cmd.MarkFlagFilename(flag, []string{})</code> no longer needed in this context and silently ignored</td>
</tr>
<tr>
<td><code>cmd.MarkFlagFilename(flag, glob[])</code>  used to turn on file completion <strong>with glob filtering</strong> (syntax of <code>[]string{&quot;*.yaml&quot;, &quot;*.yml&quot;}</code> incompatible with bash)</td>
<td>Will continue to work, however, support for bash syntax is added and should be used instead so as to work for all shells (<code>[]string{&quot;yaml&quot;, &quot;yml&quot;}</code>)</td>
</tr>
<tr>
<td><code>cmd.MarkFlagDirname(flag)</code> only completes directories (zsh-specific)</td>
<td>Has been added for all shells</td>
</tr>
<tr>
<td>Completion of a flag name does not repeat, unless flag is of type <code>*Array</code> or <code>*Slice</code> (not supported by bash)</td>
<td>Retained for <code>zsh</code> and added to <code>fish</code></td>
</tr>
<tr>
<td>Completion of a flag name does not provide the <code>=</code> form (unlike bash)</td>
<td>Retained for <code>zsh</code> and added to <code>fish</code></td>
</tr>
</tbody>
</table>
<h5 id="improvements">Improvements</h5>
<ul>
<li>Custom completion support (<code>ValidArgsFunction</code> and <code>RegisterFlagCompletionFunc()</code>)</li>
<li>File completion by default if no other completions found</li>
<li>Handling of required flags</li>
<li>File extension filtering no longer mutually exclusive with bash usage</li>
<li>Completion of directory names <em>within</em> another directory</li>
<li>Support for <code>=</code> form of flags</li>
</ul>

    
        <h1 id="documentation-generation">Documentation generation</h1>
<h2 id="options">Options</h2>
<ul>
<li><code>DisableAutoGenTag</code>. You may set <code>cmd.DisableAutoGenTag = true</code> to <em>entirely</em> remove the auto generated string &ldquo;<em>Auto generated by spf13/cobra&hellip;</em>&rdquo; from any documentation source.</li>
</ul>

    
        <h2 id="man-pages">Man Pages</h2>
<p>Generating man pages from a cobra command is incredibly easy. An example is as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>

	<span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
	<span style="color:#e6db74">&#34;github.com/spf13/cobra/doc&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
		<span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;test&#34;</span>,
		<span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;my test program&#34;</span>,
	}
	<span style="color:#a6e22e">header</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenManHeader</span>{
		<span style="color:#a6e22e">Title</span>: <span style="color:#e6db74">&#34;MINE&#34;</span>,
		<span style="color:#a6e22e">Section</span>: <span style="color:#e6db74">&#34;3&#34;</span>,
	}
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenManTree</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#a6e22e">header</span>, <span style="color:#e6db74">&#34;/tmp&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
}
</code></pre></div><p>That will get you a man page <code>/tmp/test.3</code></p>

    
        <h2 id="markdown-docs">Markdown Docs</h2>
<p>Generating Markdown pages from a cobra command is incredibly easy. An example is as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>

	<span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
	<span style="color:#e6db74">&#34;github.com/spf13/cobra/doc&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
		<span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;test&#34;</span>,
		<span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;my test program&#34;</span>,
	}
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenMarkdownTree</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#e6db74">&#34;/tmp&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
}
</code></pre></div><p>That will get you a Markdown document <code>/tmp/test.md</code></p>
<h3 id="the-entire-command-tree">The entire command tree</h3>
<p>This program can actually generate docs for the kubectl command in the kubernetes project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>
	<span style="color:#e6db74">&#34;io/ioutil&#34;</span>
	<span style="color:#e6db74">&#34;os&#34;</span>

	<span style="color:#e6db74">&#34;k8s.io/kubernetes/pkg/kubectl/cmd&#34;</span>
	<span style="color:#a6e22e">cmdutil</span> <span style="color:#e6db74">&#34;k8s.io/kubernetes/pkg/kubectl/cmd/util&#34;</span>

	<span style="color:#e6db74">&#34;github.com/spf13/cobra/doc&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">kubectl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">NewKubectlCommand</span>(<span style="color:#a6e22e">cmdutil</span>.<span style="color:#a6e22e">NewFactory</span>(<span style="color:#66d9ef">nil</span>), <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdin</span>, <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">Discard</span>, <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">Discard</span>)
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenMarkdownTree</span>(<span style="color:#a6e22e">kubectl</span>, <span style="color:#e6db74">&#34;./&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
}
</code></pre></div><p>This will generate a whole series of files, one for each command in the tree, in the directory specified (in this case &ldquo;./&quot;)</p>
<h3 id="for-a-single-command">For a single command</h3>
<p>You may wish to have more control over the output, or only generate for a single command, instead of the entire command tree. If this is the case you may prefer to <code>GenMarkdown</code> instead of <code>GenMarkdownTree</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> new(<span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>)
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenMarkdown</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#a6e22e">out</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
</code></pre></div><p>This will write the markdown doc for ONLY &ldquo;cmd&rdquo; into the out, buffer.</p>
<h3 id="customize-the-output">Customize the output</h3>
<p>Both <code>GenMarkdown</code> and <code>GenMarkdownTree</code> have alternate versions with callbacks to get some control of the output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GenMarkdownTreeCustom</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">dir</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">filePrepender</span>, <span style="color:#a6e22e">linkHandler</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
	<span style="color:#75715e">//...
</span><span style="color:#75715e"></span>}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GenMarkdownCustom</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">out</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>, <span style="color:#a6e22e">linkHandler</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
	<span style="color:#75715e">//...
</span><span style="color:#75715e"></span>}
</code></pre></div><p>The <code>filePrepender</code> will prepend the return value given the full filepath to the rendered Markdown file. A common use case is to add front matter to use the generated documentation with <a href="http://gohugo.io/">Hugo</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fmTemplate</span> = <span style="color:#e6db74">`</span><span style="color:#e6db74">---
</span><span style="color:#e6db74">date: %s
</span><span style="color:#e6db74">title: &#34;%s&#34;
</span><span style="color:#e6db74">slug: %s
</span><span style="color:#e6db74">url: %s
</span><span style="color:#e6db74">---
</span><span style="color:#e6db74"></span><span style="color:#e6db74">`</span>

<span style="color:#a6e22e">filePrepender</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">filename</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
	<span style="color:#a6e22e">now</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">Format</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">RFC3339</span>)
	<span style="color:#a6e22e">name</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">filepath</span>.<span style="color:#a6e22e">Base</span>(<span style="color:#a6e22e">filename</span>)
	<span style="color:#a6e22e">base</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSuffix</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">Ext</span>(<span style="color:#a6e22e">name</span>))
	<span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;/commands/&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">ToLower</span>(<span style="color:#a6e22e">base</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span>
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#a6e22e">fmTemplate</span>, <span style="color:#a6e22e">now</span>, <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Replace</span>(<span style="color:#a6e22e">base</span>, <span style="color:#e6db74">&#34;_&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), <span style="color:#a6e22e">base</span>, <span style="color:#a6e22e">url</span>)
}
</code></pre></div><p>The <code>linkHandler</code> can be used to customize the rendered internal links to the commands, given a filename:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">linkHandler</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
	<span style="color:#a6e22e">base</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSuffix</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">Ext</span>(<span style="color:#a6e22e">name</span>))
	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;/commands/&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">ToLower</span>(<span style="color:#a6e22e">base</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span>
}
</code></pre></div>
    
        <h2 id="restructured-text-docs">ReStructured Text Docs</h2>
<p>Generating ReST pages from a cobra command is incredibly easy. An example is as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>

	<span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
	<span style="color:#e6db74">&#34;github.com/spf13/cobra/doc&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
		<span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;test&#34;</span>,
		<span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;my test program&#34;</span>,
	}
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenReSTTree</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#e6db74">&#34;/tmp&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
}
</code></pre></div><p>That will get you a ReST document <code>/tmp/test.rst</code></p>
<h3 id="the-entire-command-tree">The entire command tree</h3>
<p>This program can actually generate docs for the kubectl command in the kubernetes project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>
	<span style="color:#e6db74">&#34;io/ioutil&#34;</span>
	<span style="color:#e6db74">&#34;os&#34;</span>

	<span style="color:#e6db74">&#34;k8s.io/kubernetes/pkg/kubectl/cmd&#34;</span>
	<span style="color:#a6e22e">cmdutil</span> <span style="color:#e6db74">&#34;k8s.io/kubernetes/pkg/kubectl/cmd/util&#34;</span>

	<span style="color:#e6db74">&#34;github.com/spf13/cobra/doc&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">kubectl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">NewKubectlCommand</span>(<span style="color:#a6e22e">cmdutil</span>.<span style="color:#a6e22e">NewFactory</span>(<span style="color:#66d9ef">nil</span>), <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdin</span>, <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">Discard</span>, <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">Discard</span>)
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenReSTTree</span>(<span style="color:#a6e22e">kubectl</span>, <span style="color:#e6db74">&#34;./&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
}
</code></pre></div><p>This will generate a whole series of files, one for each command in the tree, in the directory specified (in this case &ldquo;./&quot;)</p>
<h3 id="for-a-single-command">For a single command</h3>
<p>You may wish to have more control over the output, or only generate for a single command, instead of the entire command tree. If this is the case you may prefer to <code>GenReST</code> instead of <code>GenReSTTree</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> new(<span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>)
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenReST</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#a6e22e">out</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
</code></pre></div><p>This will write the ReST doc for ONLY &ldquo;cmd&rdquo; into the out, buffer.</p>
<h3 id="customize-the-output">Customize the output</h3>
<p>Both <code>GenReST</code> and <code>GenReSTTree</code> have alternate versions with callbacks to get some control of the output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GenReSTTreeCustom</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">dir</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">filePrepender</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">linkHandler</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">string</span>, <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
	<span style="color:#75715e">//...
</span><span style="color:#75715e"></span>}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GenReSTCustom</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">out</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>, <span style="color:#a6e22e">linkHandler</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">string</span>, <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
	<span style="color:#75715e">//...
</span><span style="color:#75715e"></span>}
</code></pre></div><p>The <code>filePrepender</code> will prepend the return value given the full filepath to the rendered ReST file. A common use case is to add front matter to use the generated documentation with <a href="http://gohugo.io/">Hugo</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fmTemplate</span> = <span style="color:#e6db74">`</span><span style="color:#e6db74">---
</span><span style="color:#e6db74">date: %s
</span><span style="color:#e6db74">title: &#34;%s&#34;
</span><span style="color:#e6db74">slug: %s
</span><span style="color:#e6db74">url: %s
</span><span style="color:#e6db74">---
</span><span style="color:#e6db74"></span><span style="color:#e6db74">`</span>
<span style="color:#a6e22e">filePrepender</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">filename</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
	<span style="color:#a6e22e">now</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">Format</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">RFC3339</span>)
	<span style="color:#a6e22e">name</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">filepath</span>.<span style="color:#a6e22e">Base</span>(<span style="color:#a6e22e">filename</span>)
	<span style="color:#a6e22e">base</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSuffix</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">Ext</span>(<span style="color:#a6e22e">name</span>))
	<span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;/commands/&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">ToLower</span>(<span style="color:#a6e22e">base</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span>
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#a6e22e">fmTemplate</span>, <span style="color:#a6e22e">now</span>, <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Replace</span>(<span style="color:#a6e22e">base</span>, <span style="color:#e6db74">&#34;_&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), <span style="color:#a6e22e">base</span>, <span style="color:#a6e22e">url</span>)
}
</code></pre></div><p>The <code>linkHandler</code> can be used to customize the rendered links to the commands, given a command name and reference. This is useful while converting rst to html or while generating documentation with tools like Sphinx where <code>:ref:</code> is used:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Sphinx cross-referencing format
</span><span style="color:#75715e"></span><span style="color:#a6e22e">linkHandler</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">ref</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;:ref:`%s &lt;%s&gt;`&#34;</span>, <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">ref</span>)
}
</code></pre></div>
    
        <h2 id="yaml-docs">Yaml Docs</h2>
<p>Generating yaml files from a cobra command is incredibly easy. An example is as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;log&#34;</span>

	<span style="color:#e6db74">&#34;github.com/spf13/cobra&#34;</span>
	<span style="color:#e6db74">&#34;github.com/spf13/cobra/doc&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">cobra</span>.<span style="color:#a6e22e">Command</span>{
		<span style="color:#a6e22e">Use</span>:   <span style="color:#e6db74">&#34;test&#34;</span>,
		<span style="color:#a6e22e">Short</span>: <span style="color:#e6db74">&#34;my test program&#34;</span>,
	}
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenYamlTree</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#e6db74">&#34;/tmp&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
}
</code></pre></div><p>That will get you a Yaml document <code>/tmp/test.yaml</code></p>
<h3 id="the-entire-command-tree">The entire command tree</h3>
<p>This program can actually generate docs for the kubectl command in the kubernetes project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;io/ioutil&#34;</span>
	<span style="color:#e6db74">&#34;log&#34;</span>
	<span style="color:#e6db74">&#34;os&#34;</span>

	<span style="color:#e6db74">&#34;k8s.io/kubernetes/pkg/kubectl/cmd&#34;</span>
	<span style="color:#a6e22e">cmdutil</span> <span style="color:#e6db74">&#34;k8s.io/kubernetes/pkg/kubectl/cmd/util&#34;</span>

	<span style="color:#e6db74">&#34;github.com/spf13/cobra/doc&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">kubectl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">cmd</span>.<span style="color:#a6e22e">NewKubectlCommand</span>(<span style="color:#a6e22e">cmdutil</span>.<span style="color:#a6e22e">NewFactory</span>(<span style="color:#66d9ef">nil</span>), <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdin</span>, <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">Discard</span>, <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">Discard</span>)
	<span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenYamlTree</span>(<span style="color:#a6e22e">kubectl</span>, <span style="color:#e6db74">&#34;./&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
	}
}
</code></pre></div><p>This will generate a whole series of files, one for each command in the tree, in the directory specified (in this case &ldquo;./&quot;)</p>
<h3 id="for-a-single-command">For a single command</h3>
<p>You may wish to have more control over the output, or only generate for a single command, instead of the entire command tree. If this is the case you may prefer to <code>GenYaml</code> instead of <code>GenYamlTree</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">	<span style="color:#a6e22e">out</span> <span style="color:#f92672">:=</span> new(<span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>)
	<span style="color:#a6e22e">doc</span>.<span style="color:#a6e22e">GenYaml</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#a6e22e">out</span>)
</code></pre></div><p>This will write the yaml doc for ONLY &ldquo;cmd&rdquo; into the out, buffer.</p>
<h3 id="customize-the-output">Customize the output</h3>
<p>Both <code>GenYaml</code> and <code>GenYamlTree</code> have alternate versions with callbacks to get some control of the output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GenYamlTreeCustom</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">dir</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">filePrepender</span>, <span style="color:#a6e22e">linkHandler</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
	<span style="color:#75715e">//...
</span><span style="color:#75715e"></span>}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GenYamlCustom</span>(<span style="color:#a6e22e">cmd</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Command</span>, <span style="color:#a6e22e">out</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>, <span style="color:#a6e22e">linkHandler</span> <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">error</span> {
	<span style="color:#75715e">//...
</span><span style="color:#75715e"></span>}
</code></pre></div><p>The <code>filePrepender</code> will prepend the return value given the full filepath to the rendered Yaml file. A common use case is to add front matter to use the generated documentation with <a href="http://gohugo.io/">Hugo</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fmTemplate</span> = <span style="color:#e6db74">`</span><span style="color:#e6db74">---
</span><span style="color:#e6db74">date: %s
</span><span style="color:#e6db74">title: &#34;%s&#34;
</span><span style="color:#e6db74">slug: %s
</span><span style="color:#e6db74">url: %s
</span><span style="color:#e6db74">---
</span><span style="color:#e6db74"></span><span style="color:#e6db74">`</span>

<span style="color:#a6e22e">filePrepender</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">filename</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
	<span style="color:#a6e22e">now</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">Format</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">RFC3339</span>)
	<span style="color:#a6e22e">name</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">filepath</span>.<span style="color:#a6e22e">Base</span>(<span style="color:#a6e22e">filename</span>)
	<span style="color:#a6e22e">base</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSuffix</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">Ext</span>(<span style="color:#a6e22e">name</span>))
	<span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;/commands/&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">ToLower</span>(<span style="color:#a6e22e">base</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span>
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#a6e22e">fmTemplate</span>, <span style="color:#a6e22e">now</span>, <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Replace</span>(<span style="color:#a6e22e">base</span>, <span style="color:#e6db74">&#34;_&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>), <span style="color:#a6e22e">base</span>, <span style="color:#a6e22e">url</span>)
}
</code></pre></div><p>The <code>linkHandler</code> can be used to customize the rendered internal links to the commands, given a filename:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">linkHandler</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
	<span style="color:#a6e22e">base</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSuffix</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">Ext</span>(<span style="color:#a6e22e">name</span>))
	<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;/commands/&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">ToLower</span>(<span style="color:#a6e22e">base</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span>
}
</code></pre></div>
    
        <h1 id="contributing-to-cobra">Contributing to Cobra</h1>
<p>Thank you so much for contributing to Cobra. We appreciate your time and help.
Here are some guidelines to help you get started.</p>
<h2 id="code-of-conduct">Code of Conduct</h2>
<p>Be kind and respectful to the members of the community. Take time to educate
others who are seeking help. Harassment of any kind will not be tolerated.</p>
<h2 id="questions">Questions</h2>
<p>If you have questions regarding Cobra, feel free to ask it in the community
<a href="https://gophers.slack.com/archives/CD3LP1199">#cobra Slack channel</a></p>
<h2 id="filing-a-bug-or-feature">Filing a bug or feature</h2>
<ol>
<li>Before filing an issue, please check the existing issues to see if a
similar one was already opened. If there is one already opened, feel free
to comment on it.</li>
<li>If you believe you've found a bug, please provide detailed steps of
reproduction, the version of Cobra and anything else you believe will be
useful to help troubleshoot it (e.g. OS environment, environment variables,
etc&hellip;). Also state the current behavior vs. the expected behavior.</li>
<li>If you'd like to see a feature or an enhancement please open an issue with
a clear title and description of what the feature is and why it would be
beneficial to the project and its users.</li>
</ol>
<h2 id="submitting-changes">Submitting changes</h2>
<ol>
<li>CLA: Upon submitting a Pull Request (PR), contributors will be prompted to
sign a CLA. Please sign the CLA :slightly_smiling_face:</li>
<li>Tests: If you are submitting code, please ensure you have adequate tests
for the feature. Tests can be run via <code>go test ./...</code> or <code>make test</code>.</li>
<li>Since this is golang project, ensure the new code is properly formatted to
ensure code consistency. Run <code>make all</code>.</li>
</ol>
<h3 id="quick-steps-to-contribute">Quick steps to contribute</h3>
<ol>
<li>Fork the project.</li>
<li>Download your fork to your PC (<code>git clone https://github.com/your_username/cobra &amp;&amp; cd cobra</code>)</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Make changes and run tests (<code>make test</code>)</li>
<li>Add them to staging (<code>git add .</code>)</li>
<li>Commit your changes (<code>git commit -m 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new pull request</li>
</ol>
<!-- Links -->

    
        <h1 id="cobra-changelog">Cobra Changelog</h1>
<h2 id="pending">Pending</h2>
<ul>
<li>Fix man page doc generation - no auto generated tag when <code>cmd.DisableAutoGenTag = true</code> @jpmcb</li>
</ul>
<h2 id="v100">v1.0.0</h2>
<p>Announcing v1.0.0 of Cobra. 🎉</p>
<h3 id="notable-changes">Notable Changes</h3>
<ul>
<li>Fish completion (including support for Go custom completion) @marckhouzam</li>
<li>API (urgent): Rename BashCompDirectives to ShellCompDirectives @marckhouzam</li>
<li>Remove/replace SetOutput on Command - deprecated @jpmcb</li>
<li>add support for autolabel stale PR @xchapter7x</li>
<li>Add Labeler Actions @xchapter7x</li>
<li>Custom completions coded in Go (instead of Bash) @marckhouzam</li>
<li>Partial Revert of #922 @jharshman</li>
<li>Add Makefile to project @jharshman</li>
<li>Correct documentation for InOrStdin @desponda</li>
<li>Apply formatting to templates @jharshman</li>
<li>Revert change so help is printed on stdout again @marckhouzam</li>
<li>Update md2man to v2.0.0 @pdf</li>
<li>update viper to v1.4.0 @umarcor</li>
<li>Update cmd/root.go example in README.md @jharshman</li>
</ul>

    
        <h1 id="projects-using-cobra">Projects using Cobra</h1>
<ul>
<li><a href="https://github.com/arduino/arduino-cli">Arduino CLI</a></li>
<li><a href="http://www.blevesearch.com/">Bleve</a></li>
<li><a href="http://www.cockroachlabs.com/">CockroachDB</a></li>
<li><a href="https://github.com/cosmos/cosmos-sdk">Cosmos SDK</a></li>
<li><a href="https://github.com/derekparker/delve">Delve</a></li>
<li><a href="https://github.com/docker/distribution">Docker (distribution)</a></li>
<li><a href="https://etcd.io/">Etcd</a></li>
<li><a href="https://github.com/gardener/gardenctl">Gardener</a></li>
<li><a href="https://github.com/giantswarm/gsctl">Giant Swarm's gsctl</a></li>
<li><a href="https://github.com/erdaltsksn/git-bump">Git Bump</a></li>
<li><a href="https://github.com/cli/cli">Github CLI</a></li>
<li><a href="https://github.com/erdaltsksn/gh-label">GitHub Labeler</a></li>
<li><a href="https://golangci-lint.run">Golangci-lint</a></li>
<li><a href="http://www.gopherjs.org/">GopherJS</a></li>
<li><a href="https://helm.sh">Helm</a></li>
<li><a href="https://gohugo.io">Hugo</a></li>
<li><a href="https://istio.io">Istio</a></li>
<li><a href="https://github.com/kool-dev/kool">Kool</a></li>
<li><a href="http://kubernetes.io/">Kubernetes</a></li>
<li><a href="https://linkerd.io/">Linkerd</a></li>
<li><a href="https://github.com/mattermost/mattermost-server">Mattermost-server</a></li>
<li><a href="https://github.com/metal-stack/metalctl">Metal Stack CLI</a></li>
<li><a href="https://github.com/moby/moby">Moby (former Docker)</a></li>
<li><a href="https://github.com/nanobox-io/nanobox">Nanobox</a>/<a href="https://github.com/nanopack">Nanopack</a></li>
<li><a href="https://www.openshift.com/">OpenShift</a></li>
<li><a href="https://github.com/ory/hydra">Ory Hydra</a></li>
<li><a href="https://github.com/ory/kratos">Ory Kratos</a></li>
<li><a href="https://github.com/alibaba/pouch">Pouch</a></li>
<li><a href="http://www.projectatomic.io/">ProjectAtomic (enterprise)</a></li>
<li><a href="https://github.com/uber/prototool">Prototool</a></li>
<li><a href="https://github.com/erdaltsksn/random">Random</a></li>
<li><a href="https://rclone.org/">Rclone</a></li>
<li><a href="https://skaffold.dev/">Skaffold</a></li>
<li><a href="https://github.com/tendermint/tendermint">Tendermint</a></li>
<li><a href="https://werf.io/">Werf</a></li>
</ul>

    
        <h1 id="license">License</h1>
<p>Cobra is released under the Apache 2.0 license. See <a href="https://github.com/spf13/cobra/blob/master/LICENSE.txt">LICENSE.txt</a></p>

    

        </div>
        <div class="dark-box">
            
        </div>
    </div>
    
</body>
</html>
